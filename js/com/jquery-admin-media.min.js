function sucomInitAdminMedia(e,i){var a="table.sucom-settings";void 0!==e&&e&&(a=e+" "+a),jQuery(a+" .sucom_image_upload_lib").each(function(e){sucomMaybeShowUpload(this,e)}),jQuery(document).on("change",a+" .sucom_image_upload_lib",function(e){sucomMaybeShowUpload(this,e)}),jQuery(document).on("change",a+" .sucom_image_upload_id",function(e){sucomShowLibraryImage(this,e)}),jQuery(document).on("click",a+" .sucom_image_upload_button",function(e){sucomSelectLibraryImage(this,e)})}function sucomMaybeShowUpload(e,i){var a=jQuery(e).val(),t=jQuery(e).attr("data-img-id-css-id"),e=jQuery(e).attr("data-upload-css-id");"wp"===a?jQuery("#"+e).show():jQuery("#"+e).hide(),t&&sucomShowLibraryImage(jQuery("#"+t),i)}function sucomShowLibraryImage(e,i){var a,t=jQuery(e).attr("data-img-lib-css-id"),u=jQuery(e).attr("data-img-url-css-id"),o=jQuery(e).attr("data-preview-css-id"),d=jQuery(e).val(),m=(m=d)||jQuery(e).attr("placeholder");o&&((a=jQuery("#"+o)).empty(),m)&&t&&"wp"===jQuery("#"+t).val()&&jQuery.isNumeric(m)&&(u&&(d?(jQuery("#"+u).val(""),jQuery("#"+u).prop("disabled",!0)):jQuery("#"+u).prop("disabled",!1)),new wp.media.model.Attachment.get(m).fetch({success:function(e){var i;void 0!==e.attributes.sizes.thumbnail.url&&(e=e.attributes.sizes.thumbnail,a)&&(i='<img src="'+e.url+'"',e.width&&(i+=' width="'+e.width+'"'),e.height&&(i+=' height="'+e.height+'"'),a.html(i+="/>"))}}))}function sucomSelectLibraryImage(t,e){e.preventDefault(),void 0!==window.sucom_image_upload_media&&window.sucom_image_upload_media.close(),window.sucom_image_upload_media=wp.media({title:sucomAdminMediaL10n._select_image,button:{text:sucomAdminMediaL10n._select_image},multiple:!1,library:{type:"image"}}),window.sucom_image_upload_media.on("open",function(){var e,i=jQuery(t).attr("data-wp-img-id");i&&jQuery.isNumeric(i)&&(e=window.sucom_image_upload_media.state().get("selection"),i=wp.media.attachment(i),e.add(i?[i]:[])),jQuery(".media-modal",t.el).find("#media-search-input").focus()}),window.sucom_image_upload_media.on("select",function(){var e=window.sucom_image_upload_media.state().get("selection").first().toJSON(),i=jQuery(t).attr("data-img-id-css-id"),a=jQuery(t).attr("data-img-lib-css-id");jQuery(t).attr("data-wp-img-id",e.id),a&&jQuery("#"+a).val("wp"),i&&jQuery("#"+i).val(e.id).change()}),window.sucom_image_upload_media.open()}jQuery(document).bind("sucom_init_metabox",function(e,i,a){sucomInitAdminMedia(i,a)});